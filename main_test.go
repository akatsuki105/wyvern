package main

import "testing"

func TestRun(t *testing.T) {
	var src = []byte{
		0, 0, 0, 0, 0, 1, 6, 2, 3, 3, 3, 3, 0, 38, 33, 32, 32, 32, 0, 0, 0, 0, 0, 0, 0, 0, 6, 2, 1, 1, 1, 1, 2, 6, 0, 32, 32, 32, 32, 0, 0, 6, 1, 0, 3, 3, 2, 2, 1, 1, 1, 1, 2, 2, 3, 35, 32, 33, 38, 0, 0, 6, 0, 1, 0, 1, 2, 2, 1, 1, 1, 1, 1, 2, 3, 3, 33, 32, 38, 0, 0, 0, 0, 0, 3, 2, 1, 1, 1, 2, 2, 1, 1, 1, 2, 3, 32, 32, 32, 32, 0, 0, 0, 0, 3, 2, 1, 1, 1, 1, 1, 1, 1, 1, 2, 3, 32, 32, 32, 0, 0, 0, 3, 6, 4, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 6, 38, 35, 0, 0, 0, 0, 0, 3, 4, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 6, 35, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 2, 2, 5, 5, 2, 2, 1, 1, 0, 0, 0, 0, 0, 0, 5, 5, 0, 5, 3, 5, 2, 2, 0, 5, 0, 2, 5, 0, 37, 0, 5, 5, 0, 0, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 37, 37, 5, 5, 0, 0, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 0, 5, 5, 5, 5, 5, 0, 0, 5, 2, 5, 0, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 2, 5, 0, 0, 0, 5, 3, 5, 5, 3, 5, 5, 5, 5, 5, 0, 0, 0, 5, 0, 0, 5, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 3, 3, 3, 3, 3, 3, 2, 3, 3, 2, 3, 3, 3, 3, 0, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 2, 2, 32, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0,
	}
	compressed := compress(src)
	decompressed := decompress(compressed)

	if len(src) != len(decompressed) {
		t.Fatalf("TestRun failed: wrong size of decompressed data. want=%d, got=%d", len(decompressed), len(src))
	}

	for i, b := range src {
		if b != decompressed[i] {
			t.Fatalf("TestRun failed: %d's data is wrong in decompressed data. want=0x%02x, got=%02x", i, b, decompressed[i])
		}
	}
}
